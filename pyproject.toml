[project]
name = "logdetective"

description = "Log using LLM AI to search for build/test failures and provide ideas for fixing these."
authors = [{name = "Jiri Podivin", email = "jpodivin@gmail.com"}]
license = "Apache-2.0"
readme = "README.md"

classifiers = [
    "Development Status :: 4 - Beta",
    "Environment :: Console",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: Apache Software License",
    "Natural Language :: English",
    "Programming Language :: Python :: 3",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Software Development :: Debuggers",
    "Topic :: Internet :: Log Analysis"
]

dynamic = ["version"]

requires-python = ">=3.11"

dependencies = [
    "requests>0.2.31",
    "llama-cpp-python>0.2.56, !=0.2.86",
    "drain3 >=0.9.11, < 1.0.0",
    "huggingface-hub>0.23.2",
    # rawhide has numpy 2, F40 and F41 are still on 1.26
    # we need to support both versions
    "numpy>=1.26.0",
    "python-gitlab >=4.10.0, < 6.0.0",
]

[project.urls]
homepage = "https://github.com/fedora-copr/logdetective"
issues = "https://github.com/fedora-copr/logdetective/issues"



[project.optional-dependencies]
server = [
    "fastapi>=0.115.8, < 1.0.0",
    "pydantic>=2.10.6, < 3.0.0",
    "pyyaml>=6.0.0, <7.0.0",
]

[tool.hatch.envs.hatch-build]
dependencies = [
  "cython",
]

[project.scripts]
logdetective = 'logdetective.logdetective:main'

[tool.pylint]
disable = [
    "inconsistent-return-statements",
    "missing-module-docstring",
    "too-few-public-methods",
    "unspecified-encoding",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.version]
path = "logdetective/__init__.py"

[tool.hatch.build.targets.sdist]
include = ["logdetective/drain3.ini"]

[tool.hatch.build.targets.wheel]
include = ["logdetective/drain3.ini"]
